<html>
    <head>
        <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
        <style>
            h1 {
                font-size: 3em;
                font-weight: bold;
                color: #0a71b4;
                display: flex;
                flex-grow: 1;
                justify-content: center;
                align-items: center;
                margin: 0;    
            }
            h2 {
                margin: unset;
                color: #0a71b4;
                margin: 1.5em 0 .5em 0;
            }
            li {
                margin-top: .5em;
            }
            a:link {
                color: #0a71b4;
            }
            a:visited {
                color: #6dbcf2;
            }
            .title-wrapper {
                display: flex;
                justify-content: flex-start;
                align-items: start;

            }
            .title {
                display: flex;
                flex-direction: column;
                flex-grow: 1;

            }
            .title {
                display: flex;
                
                flex-grow: 1;
                justify-content: center;

            }
            .subtitle {
                display: flex;
                flex-grow: 1;
                justify-content: center;
                font-size: 1.5em;
                color: #505050;
                font-family: sans-serif;
                font-weight: bold;
                margin-top: 1em;
            }
        </style>
        <title>
            Avenirs - ePortfolio :: Dev
        </title>
    </head>
    <body>
        <div class="title-wrapper">
            <img src="assets/images/avenir-esr-logo_medium.jpg" alt="Avenir(s) ESR Logo" width=""> 
            <div class="title">

                <h1>Avenirs - ePortfolio </h1>
                <div class="subtitle">
                    Development Environment
                </div>
            </div>

        </div>
            <div class="main-container">
                <h2>Quick-start</h2>
                <div class="sub-container">
                    
                    <pre>
                        git clone git@github.com:avenirs-esr/srv-dev.git --recurse
                        cd srv-dev/
                        npm i
                        npm run deploy
                    </pre>

                  You should then be able to access this page - example for localhost: 
                   <a href="https://localhost/" target="_blank">https://localhost/</a>
                </div>

                <h2>End points</h2>
                <div class="sub-container">
                    <a href="https://github.com/avenirs-esr/srv-dev/blob/main/services/apache/avenirs-apache-overlay/conf/extra/avenirs.conf" target="_blank">
                        See Avenirs' Apache Reverse proxy settings
                    </a>
                    <ul>
                    
                    <li><a href="/ldapadmin" target="_blank">PHPLdapAdmin</a></li>
                    <ul>
                        <li>Admin: cn=admin,dc=ldap-dev,dc=avenirs-esr,dc=fr/admin </li>
                        <li>Users' password in the test set: Azert123 </li>
                        <li>Test: docker exec openldap ldapsearch -x -H ldap://localhost -b dc=ldap-dev,dc=avenirs-esr,dc=fr -D "cn=admin,dc=ldap-dev,dc=avenirs-esr,dc=fr" -w admin</li>

                    </ul>
                    <li><a href="/cas/login" target="_blank">CAS</a></li>
                    <ul>
                        <li>Example of login: paterson/Azerty123 </li>

                    </ul>
                    <li><a href="/apisix-ui" target="_blank">APISIX UI</a></li>
                    <ul>
                        <li>Login: admin/admin </li>
                        <li>Grafana settings url: http://&lt;server&gt;/apisix-grafana<br/>
                            This should be required at startup and will be stored in local storage of browser.
                        </li>
                    </ul>
                    <li><a href="/apisix-prometheus" target="_blank">Prometheus</a></li>
                    <li><a href="/apisix-grafana" target="_blank">Grafana</a></li>
                </ul>
                </div>
            </div>


            <h2>Resources</h2>
            <div class="sub-container">
                <ul>
                    <li>
                        <a href="https://github.com/avenirs-esr/srv-dev/" target="_blank">
                            Srv-dev GitHub Project
                        </a>
                    </li>
                    <li>
                        <a href="https://avenirs-esr.github.io/dev-doc/" target="_blank">
                           Avenirs ePortfolio ESR -  Developer Documentation
                        </a>
                    </li>
                </ul>
            </div>

            <h2>APISix example</h2>
            <div class="sub-container">
                <ul>
                    <li>
                        List the routes<br/>
                        <pre>curl -H "X-API-KEY: edd1c9f034335f136f87ad84b625c8f1" -i "http://&lt;server&gt;/apisix-api/apisix/admin/routes"
                        </pre>
                        
                    </li>
                    <li>
                        Create a new route<br/>
                        <pre>curl -H "X-API-KEY: edd1c9f034335f136f87ad84b625c8f1" -i "http://&lt;server&gt;/apisix-api/apisix/admin/routes" -X PUT -d '
{
  "id": "getting-started-ip",
  "uri": "/ip",
  "upstream": {
    "type": "roundrobin",
    "nodes": {
      "httpbin.org:80": 1
    }
  }
}'
                        </pre>
                        
                    </li>
                    <li>
                        Test the new route<br/>
                        <pre>curl "http://&lt;server&gt;/apisix-gw/ip"</pre>
                        
                    </li>
                    <li>
                        Delete the route<br/>
                        <pre>curl -H "X-API-KEY: edd1c9f034335f136f87ad84b625c8f1" -i "http://&lt;server&gt;/apisix-api/apisix/admin/routes/getting-started-ip" -X DELETE</pre>
                        
                    </li>
                </ul>
            </div>

        
    </body>
</html>
